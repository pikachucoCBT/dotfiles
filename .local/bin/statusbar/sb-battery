#!/bin/sh

case $BLOCK_BUTTON in
	3) notify-send "ðŸ”‹ Battery module" "Mostrando a porcentagem total das baterias combinadas.
- Scroll para ajustar brilho (xbacklight)." ;;
	4) xbacklight -inc 10 ;;
	5) xbacklight -dec 10 ;;
	6) setsid -f "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

total_capacity=0
battery_count=0

for battery in /sys/class/power_supply/BAT?*; do
	capacity=$(cat "$battery/capacity" 2>/dev/null)
	if [ -n "$capacity" ]; then
		total_capacity=$((total_capacity + capacity))
		battery_count=$((battery_count + 1))
	fi
done

if [ "$battery_count" -gt 0 ]; then
	average_capacity=$((total_capacity / battery_count))
	printf "ï‰€ %d%%\n" "$average_capacity"
else
	printf "ï‰€ N/A\n"
fi


